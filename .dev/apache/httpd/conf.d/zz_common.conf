Timeout 60

LogFormat "%a %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%a %l %u %t \"%r\" %>s %b" common

<IfModule logio_module>
        LogFormat "%a %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
</IfModule>

MaxKeepAliveRequests 0


ExtendedStatus On
EnableMMAP Off
EnableSendfile Off

<Directory "/var/www">
        Options -Indexes +FollowSymLinks
        AddType application/x-httpd-php .php
        AddType application/x-httpd-php .cgi
        AddType application/x-httpd-php .asp
        AddType application/x-httpd-php .htm
</Directory>

<Files ~ "Entries">
    Order allow,deny
    Deny from all
</Files>
<Files ~ "Repository">
    Order allow,deny 
    Deny from all
</Files>
<Files ~ "Root">
    Order allow,deny 
    Deny from all
</Files>

ServerSignature Off

<Location /server-status>
    SetHandler server-status
    Order deny,allow
    Deny from all
    
    Allow from 94.124.67.0/28
    
    Allow from 172.16.0.0/16
    
    Allow from 192.168.0.0/16
    
    Allow from 127.0.0.1
    
</Location>

<Location /server-info>
    SetHandler server-info
    Order deny,allow
    Deny from all
    
    Allow from 94.124.67.0/28
    
    Allow from 172.16.0.0/16
    
    Allow from 192.168.0.0/16
    
    Allow from 127.0.0.1
    
</Location>

# Override XCache Administration
Alias /xcache /usr/share/xcache

<Directory /usr/share/xcache>
   <IfModule mod_authz_core.c>
     # Apache 2.4
     Require local
     Require ip 172.16.0.0/16 192.168.0.0/16
   </IfModule>
   <IfModule !mod_authz_core.c>
     # Apache 2.2
     Order Deny,Allow
     Deny from All
     Allow from 127.0.0.1
     Allow from ::1
   </IfModule>
</Directory>

IncludeOptional vhosts.d/*.conf
